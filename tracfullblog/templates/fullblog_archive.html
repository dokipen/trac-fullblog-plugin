<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="layout.html" />
  <xi:include href="macros.html" />
  <head>
    <title>Blog Archive</title>
  </head>

  <body>

    <div id="ctxtnav" class="nav">
      <h2>Blog Navigation</h2>
        <ul>
          <li py:if="'BLOG_CREATE' in perm">
            <a href="${href.blog('create')}">New Post</a></li>
        </ul>
      <hr />
    </div>

    <xi:include href="fullblog_sidebar.html" />

    <div id="content" class="blog wiki">

      <h1>Blog Archive</h1>
      
      <p py:if="not blog_archive[0]">No posts.</p>
      <py:if test="blog_archive[0]">
        <div class="monthlist" py:for="period, posts in blog_archive">
            <h3>${period.strftime('%B %Y')}</h3>
            <ul>
              <li py:for="name, version, time, author, title, body, categories in posts">
                <a href="${req.href.blog('view', name)}">${title}</a>
                <span class="metainfo">
                  &nbsp;-- Posted on ${format_datetime(time, '%Y-%m-%d %H:%M')} : author
                  <a href="${req.href.blog('author', author)}">${author}</a>
                  <py:if test="categories">
                    : categories
                    <span py:for="cat in categories">
                      <a href="${req.href.blog('category', cat)}">${cat}</a>
                    </span>
                  </py:if>
                </span>
              </li>
            </ul>
        </div>
      </py:if>

      </div>
  </body>
</html>
